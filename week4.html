<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 4 - 函數設計 | C語言程式設計</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', 'Microsoft JhengHei', Arial, sans-serif;
            background: linear-gradient(to bottom, #f5f7fa 0%, #c3cfe2 100%);
            color: #2c3e50;
            line-height: 1.7;
        }
        .container { max-width: 1000px; margin: 0 auto; padding: 20px; }
        .nav {
            background: white; padding: 15px 25px; border-radius: 8px;
            margin-bottom: 30px; display: flex; justify-content: space-between;
            align-items: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .nav a {
            color: #3498db; text-decoration: none; font-weight: 600;
            padding: 8px 16px; border-radius: 4px; transition: all 0.3s ease;
        }
        .nav a:hover { background: #3498db; color: white; }
        header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white; padding: 50px 40px; border-radius: 8px;
            margin-bottom: 30px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        header h1 { font-size: 2.5em; margin-bottom: 10px; }
        header .subtitle { font-size: 1.1em; opacity: 0.9; }
        .content {
            background: white; border-radius: 8px; padding: 40px;
            margin-bottom: 30px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .content h2 {
            color: #2c3e50; font-size: 2em; margin-bottom: 20px;
            padding-bottom: 10px; border-bottom: 3px solid #3498db;
        }
        .content h3 { color: #34495e; font-size: 1.5em; margin: 30px 0 15px 0; }
        .content h4 { color: #34495e; font-size: 1.2em; margin: 20px 0 10px 0; }
        .code-block {
            background: #2c3e50; color: #ecf0f1; padding: 20px; border-radius: 4px;
            font-family: 'Consolas', 'Courier New', monospace; font-size: 0.95em;
            overflow-x: auto; margin: 20px 0; line-height: 1.8; white-space: pre-wrap;
        }
        .code-block .comment { color: #95a5a6; }
        .code-block .keyword { color: #3498db; font-weight: bold; }
        .code-block .string { color: #2ecc71; }
        .code-block .function { color: #f39c12; }
        .code-block .number { color: #e74c3c; }
        .note-box {
            background: #e8f4f8; border-left: 4px solid #3498db;
            padding: 20px; margin: 20px 0; border-radius: 4px;
        }
        .warning-box {
            background: #fff8e1; border-left: 4px solid #ffa726;
            padding: 20px; margin: 20px 0; border-radius: 4px;
        }
        .tip-box {
            background: #e8f5e9; border-left: 4px solid #66bb6a;
            padding: 20px; margin: 20px 0; border-radius: 4px;
        }
        .exercise-section {
            background: #f8f9fa; border: 2px solid #3498db;
            padding: 30px; margin: 30px 0; border-radius: 8px;
        }
        table {
            width: 100%; border-collapse: collapse; margin: 20px 0;
        }
        table th, table td {
            padding: 12px; text-align: left; border: 1px solid #ddd;
        }
        table th {
            background: #34495e; color: white; font-weight: 600;
        }
        table tr:nth-child(even) { background: #f8f9fa; }
        ul, ol { margin-left: 30px; margin-top: 10px; }
        li { margin: 8px 0; }
        .nav-buttons {
            display: flex; justify-content: space-between; margin-top: 40px;
        }
        .btn {
            display: inline-block; padding: 12px 30px; background: #3498db;
            color: white; text-decoration: none; border-radius: 4px; font-weight: 600;
            transition: all 0.3s ease;
        }
        .btn:hover {
            background: #2980b9; transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .btn-secondary { background: #95a5a6; }
        .btn-secondary:hover { background: #7f8c8d; }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav">
            <a href="week3.html">← Week 3</a>
            <span style="color: #7f8c8d; font-weight: 600;">Week 4 / 16</span>
            <a href="week5.html">Week 5 →</a>
        </div>

        <header>
            <h1>Week 4 - 函數設計</h1>
            <div class="subtitle">學習目標：理解函數的定義、呼叫與參數傳遞機制</div>
        </header>

        <div class="content">
            <h2>本週學習內容</h2>
            <ul>
                <li>函數基礎：定義、宣告、呼叫與返回值</li>
                <li>參數傳遞：傳值呼叫、陣列參數</li>
                <li>變數作用域：區域變數、全域變數、靜態變數</li>
                <li>遞迴函數：概念、應用與效能考量</li>
                <li>函數設計原則：可讀性、可維護性、可重用性</li>
                <li>實用範例：數學函數、陣列處理、遞迴應用</li>
            </ul>
        </div>

        <div class="content">
            <h2>1. 函數基礎</h2>
            
            <h3>什麼是函數？</h3>
            <p>函數是一段具有特定功能的程式碼區塊，可以被重複呼叫使用。使用函數可以：</p>
            <ul>
                <li>提高程式碼的可讀性和可維護性</li>
                <li>避免重複撰寫相同的程式碼</li>
                <li>將複雜問題分解成較小的子問題</li>
                <li>方便程式碼的測試和除錯</li>
            </ul>

            <h3>函數的基本結構</h3>
            <div class="code-block"><span class="comment">// 函數的基本語法</span>
<span class="keyword">返回值型態</span> <span class="function">函數名稱</span>(<span class="keyword">參數型態</span> 參數名稱) {
    <span class="comment">// 函數主體</span>
    <span class="keyword">return</span> 返回值;  <span class="comment">// 若返回值型態不是 void</span>
}</div>

            <h3>函數的定義與呼叫</h3>
            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="comment">// ========== 函數定義 ==========</span>
<span class="keyword">int</span> <span class="function">add</span>(<span class="keyword">int</span> a, <span class="keyword">int</span> b) {
    <span class="keyword">int</span> sum = a + b;
    <span class="keyword">return</span> sum;
}

<span class="comment">// ========== 無參數函數 ==========</span>
<span class="keyword">void</span> <span class="function">sayHello</span>() {
    <span class="function">printf</span>(<span class="string">"Hello, World!\n"</span>);
}

<span class="comment">// ========== 無返回值函數 ==========</span>
<span class="keyword">void</span> <span class="function">printNumber</span>(<span class="keyword">int</span> num) {
    <span class="function">printf</span>(<span class="string">"數字是: %d\n"</span>, num);
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="comment">// 呼叫函數</span>
    <span class="keyword">int</span> result = <span class="function">add</span>(<span class="number">5</span>, <span class="number">3</span>);
    <span class="function">printf</span>(<span class="string">"5 + 3 = %d\n"</span>, result);
    
    <span class="function">sayHello</span>();
    <span class="function">printNumber</span>(<span class="number">42</span>);
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</div>

            <h3>函數原型（Function Prototype）</h3>
            <p>函數原型是函數的宣告，告訴編譯器函數的名稱、返回值型態和參數型態。通常放在程式開頭或標頭檔中。</p>
            
            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="comment">// ========== 函數原型宣告 ==========</span>
<span class="keyword">int</span> <span class="function">multiply</span>(<span class="keyword">int</span>, <span class="keyword">int</span>);  <span class="comment">// 參數名稱可省略</span>
<span class="keyword">double</span> <span class="function">divide</span>(<span class="keyword">double</span> a, <span class="keyword">double</span> b);  <span class="comment">// 也可保留參數名稱</span>
<span class="keyword">void</span> <span class="function">printMenu</span>(<span class="keyword">void</span>);

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">int</span> result = <span class="function">multiply</span>(<span class="number">4</span>, <span class="number">5</span>);
    <span class="function">printf</span>(<span class="string">"4 × 5 = %d\n"</span>, result);
    
    <span class="keyword">double</span> quotient = <span class="function">divide</span>(<span class="number">10.0</span>, <span class="number">3.0</span>);
    <span class="function">printf</span>(<span class="string">"10 ÷ 3 = %.2f\n"</span>, quotient);
    
    <span class="function">printMenu</span>();
    
    <span class="keyword">return</span> <span class="number">0</span>;
}

<span class="comment">// ========== 函數實作 ==========</span>
<span class="keyword">int</span> <span class="function">multiply</span>(<span class="keyword">int</span> x, <span class="keyword">int</span> y) {
    <span class="keyword">return</span> x * y;
}

<span class="keyword">double</span> <span class="function">divide</span>(<span class="keyword">double</span> a, <span class="keyword">double</span> b) {
    <span class="keyword">if</span> (b == <span class="number">0</span>) {
        <span class="function">printf</span>(<span class="string">"錯誤：除數不可為 0\n"</span>);
        <span class="keyword">return</span> <span class="number">0</span>;
    }
    <span class="keyword">return</span> a / b;
}

<span class="keyword">void</span> <span class="function">printMenu</span>() {
    <span class="function">printf</span>(<span class="string">"=== 主選單 ===\n"</span>);
    <span class="function">printf</span>(<span class="string">"1. 新增\n"</span>);
    <span class="function">printf</span>(<span class="string">"2. 刪除\n"</span>);
    <span class="function">printf</span>(<span class="string">"3. 結束\n"</span>);
}</div>

            <div class="note-box">
                <strong>為什麼需要函數原型？</strong>
                <ul>
                    <li>讓 main() 函數可以放在檔案開頭</li>
                    <li>提前告知編譯器函數的存在</li>
                    <li>檢查函數呼叫時的參數是否正確</li>
                    <li>提高程式碼的可讀性</li>
                </ul>
            </div>

            <h3>返回值的使用</h3>
            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="comment">// 計算最大值</span>
<span class="keyword">int</span> <span class="function">max</span>(<span class="keyword">int</span> a, <span class="keyword">int</span> b) {
    <span class="keyword">if</span> (a > b) {
        <span class="keyword">return</span> a;
    } <span class="keyword">else</span> {
        <span class="keyword">return</span> b;
    }
    <span class="comment">// 可以簡化為：return (a > b) ? a : b;</span>
}

<span class="comment">// 計算平方</span>
<span class="keyword">int</span> <span class="function">square</span>(<span class="keyword">int</span> n) {
    <span class="keyword">return</span> n * n;
}

<span class="comment">// 判斷是否為偶數</span>
<span class="keyword">int</span> <span class="function">isEven</span>(<span class="keyword">int</span> n) {
    <span class="keyword">return</span> (n % <span class="number">2</span> == <span class="number">0</span>);  <span class="comment">// 返回 1 (真) 或 0 (假)</span>
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">int</span> num1 = <span class="number">15</span>, num2 = <span class="number">23</span>;
    
    <span class="function">printf</span>(<span class="string">"最大值: %d\n"</span>, <span class="function">max</span>(num1, num2));
    <span class="function">printf</span>(<span class="string">"%d 的平方: %d\n"</span>, num1, <span class="function">square</span>(num1));
    
    <span class="keyword">if</span> (<span class="function">isEven</span>(num2)) {
        <span class="function">printf</span>(<span class="string">"%d 是偶數\n"</span>, num2);
    } <span class="keyword">else</span> {
        <span class="function">printf</span>(<span class="string">"%d 是奇數\n"</span>, num2);
    }
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</div>

            <h3>數學函數範例</h3>
            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="comment">// 計算階乘（非遞迴版本）</span>
<span class="keyword">int</span> <span class="function">factorial</span>(<span class="keyword">int</span> n) {
    <span class="keyword">int</span> result = <span class="number">1</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {
        result *= i;
    }
    <span class="keyword">return</span> result;
}

<span class="comment">// 計算次方</span>
<span class="keyword">double</span> <span class="function">power</span>(<span class="keyword">double</span> base, <span class="keyword">int</span> exponent) {
    <span class="keyword">double</span> result = <span class="number">1.0</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < exponent; i++) {
        result *= base;
    }
    <span class="keyword">return</span> result;
}

<span class="comment">// 判斷是否為質數</span>
<span class="keyword">int</span> <span class="function">isPrime</span>(<span class="keyword">int</span> n) {
    <span class="keyword">if</span> (n <= <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i * i <= n; i++) {
        <span class="keyword">if</span> (n % i == <span class="number">0</span>) {
            <span class="keyword">return</span> <span class="number">0</span>;  <span class="comment">// 不是質數</span>
        }
    }
    <span class="keyword">return</span> <span class="number">1</span>;  <span class="comment">// 是質數</span>
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="function">printf</span>(<span class="string">"5! = %d\n"</span>, <span class="function">factorial</span>(<span class="number">5</span>));
    <span class="function">printf</span>(<span class="string">"2^10 = %.0f\n"</span>, <span class="function">power</span>(<span class="number">2</span>, <span class="number">10</span>));
    <span class="function">printf</span>(<span class="string">"17 是質數: %s\n"</span>, <span class="function">isPrime</span>(<span class="number">17</span>) ? <span class="string">"是"</span> : <span class="string">"否"</span>);
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</div>

            <div class="warning-box">
                <strong>常見錯誤：</strong>
                <ul>
                    <li><strong>忘記返回值</strong>：函數宣告有返回值但忘記 return</li>
                    <li><strong>返回值型態不符</strong>：返回的值與宣告的型態不一致</li>
                    <li><strong>參數數量不符</strong>：呼叫函數時參數數量與定義不同</li>
                    <li><strong>未宣告函數</strong>：在 main() 之後定義函數但沒有寫原型</li>
                </ul>
            </div>
        </div>

        <div class="content">
            <h2>2. 參數傳遞</h2>
            
            <h3>傳值呼叫（Call by Value）</h3>
            <p>C 語言的函數參數傳遞採用「傳值呼叫」，這表示函數接收的是參數值的「副本」，修改參數不會影響原始變數。</p>

            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="keyword">void</span> <span class="function">tryToChange</span>(<span class="keyword">int</span> x) {
    x = <span class="number">100</span>;  <span class="comment">// 只改變副本，不影響原始變數</span>
    <span class="function">printf</span>(<span class="string">"函數內 x = %d\n"</span>, x);
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">int</span> num = <span class="number">10</span>;
    
    <span class="function">printf</span>(<span class="string">"呼叫前 num = %d\n"</span>, num);
    <span class="function">tryToChange</span>(num);
    <span class="function">printf</span>(<span class="string">"呼叫後 num = %d\n"</span>, num);  <span class="comment">// num 仍然是 10</span>
    
    <span class="keyword">return</span> <span class="number">0</span>;
}

<span class="comment">/* 輸出：
呼叫前 num = 10
函數內 x = 100
呼叫後 num = 10
*/</span></div>

            <h3>交換兩數（錯誤與正確方式）</h3>
            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="comment">// ========== 錯誤的交換方式 ==========</span>
<span class="keyword">void</span> <span class="function">swapWrong</span>(<span class="keyword">int</span> a, <span class="keyword">int</span> b) {
    <span class="keyword">int</span> temp = a;
    a = b;
    b = temp;
    <span class="comment">// 只交換了副本，原始變數不受影響</span>
}

<span class="comment">// ========== 正確的交換方式（使用指標，Week 6 會學）==========</span>
<span class="comment">// void swap(int *a, int *b) {</span>
<span class="comment">//     int temp = *a;</span>
<span class="comment">//     *a = *b;</span>
<span class="comment">//     *b = temp;</span>
<span class="comment">// }</span>

<span class="comment">// ========== 透過返回值交換（替代方案）==========</span>
<span class="keyword">void</span> <span class="function">swapUsingReturn</span>(<span class="keyword">int</span> *a, <span class="keyword">int</span> *b, <span class="keyword">int</span> *new_a, <span class="keyword">int</span> *new_b) {
    *new_a = *b;
    *new_b = *a;
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">int</span> x = <span class="number">5</span>, y = <span class="number">10</span>;
    
    <span class="function">printf</span>(<span class="string">"交換前: x = %d, y = %d\n"</span>, x, y);
    <span class="function">swapWrong</span>(x, y);
    <span class="function">printf</span>(<span class="string">"交換後: x = %d, y = %d\n"</span>, x, y);  <span class="comment">// 沒有改變</span>
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</div>

            <div class="note-box">
                <strong>重要觀念：</strong>
                <p>由於 C 語言使用傳值呼叫，如果想在函數中修改原始變數的值，需要使用指標（pointer）。這個主題將在 Week 6 詳細介紹。</p>
            </div>

            <h3>陣列作為參數</h3>
            <p>陣列作為參數傳遞時比較特殊，實際上傳遞的是陣列的「位址」，因此可以修改陣列內容。</p>

            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="comment">// 列印陣列</span>
<span class="keyword">void</span> <span class="function">printArray</span>(<span class="keyword">int</span> arr[], <span class="keyword">int</span> size) {
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < size; i++) {
        <span class="function">printf</span>(<span class="string">"%d "</span>, arr[i]);
    }
    <span class="function">printf</span>(<span class="string">"\n"</span>);
}

<span class="comment">// 計算陣列總和</span>
<span class="keyword">int</span> <span class="function">sumArray</span>(<span class="keyword">int</span> arr[], <span class="keyword">int</span> size) {
    <span class="keyword">int</span> sum = <span class="number">0</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < size; i++) {
        sum += arr[i];
    }
    <span class="keyword">return</span> sum;
}

<span class="comment">// 找出陣列最大值</span>
<span class="keyword">int</span> <span class="function">findMax</span>(<span class="keyword">int</span> arr[], <span class="keyword">int</span> size) {
    <span class="keyword">int</span> max = arr[<span class="number">0</span>];
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i < size; i++) {
        <span class="keyword">if</span> (arr[i] > max) {
            max = arr[i];
        }
    }
    <span class="keyword">return</span> max;
}

<span class="comment">// 將陣列所有元素乘以 2</span>
<span class="keyword">void</span> <span class="function">doubleArray</span>(<span class="keyword">int</span> arr[], <span class="keyword">int</span> size) {
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < size; i++) {
        arr[i] *= <span class="number">2</span>;  <span class="comment">// 會修改原始陣列</span>
    }
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">int</span> numbers[] = {<span class="number">3</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">9</span>, <span class="number">5</span>};
    <span class="keyword">int</span> size = <span class="keyword">sizeof</span>(numbers) / <span class="keyword">sizeof</span>(numbers[<span class="number">0</span>]);
    
    <span class="function">printf</span>(<span class="string">"原始陣列: "</span>);
    <span class="function">printArray</span>(numbers, size);
    
    <span class="function">printf</span>(<span class="string">"總和: %d\n"</span>, <span class="function">sumArray</span>(numbers, size));
    <span class="function">printf</span>(<span class="string">"最大值: %d\n"</span>, <span class="function">findMax</span>(numbers, size));
    
    <span class="function">doubleArray</span>(numbers, size);
    <span class="function">printf</span>(<span class="string">"加倍後: "</span>);
    <span class="function">printArray</span>(numbers, size);
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</div>

            <h3>多個參數的傳遞</h3>
            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="comment">// 計算矩形面積</span>
<span class="keyword">double</span> <span class="function">rectangleArea</span>(<span class="keyword">double</span> width, <span class="keyword">double</span> height) {
    <span class="keyword">return</span> width * height;
}

<span class="comment">// 計算圓的面積和周長</span>
<span class="keyword">void</span> <span class="function">circleInfo</span>(<span class="keyword">double</span> radius, <span class="keyword">double</span> *area, <span class="keyword">double</span> *circumference) {
    <span class="keyword">const</span> <span class="keyword">double</span> PI = <span class="number">3.14159</span>;
    *area = PI * radius * radius;
    *circumference = <span class="number">2</span> * PI * radius;
}

<span class="comment">// 找出三個數中的最大值和最小值</span>
<span class="keyword">void</span> <span class="function">findMinMax</span>(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c, <span class="keyword">int</span> *min, <span class="keyword">int</span> *max) {
    *min = a;
    *max = a;
    
    <span class="keyword">if</span> (b < *min) *min = b;
    <span class="keyword">if</span> (b > *max) *max = b;
    
    <span class="keyword">if</span> (c < *min) *min = c;
    <span class="keyword">if</span> (c > *max) *max = c;
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="function">printf</span>(<span class="string">"矩形面積: %.2f\n"</span>, <span class="function">rectangleArea</span>(<span class="number">5.0</span>, <span class="number">3.0</span>));
    
    <span class="keyword">double</span> area, circumference;
    <span class="function">circleInfo</span>(<span class="number">5.0</span>, &area, &circumference);
    <span class="function">printf</span>(<span class="string">"圓面積: %.2f, 周長: %.2f\n"</span>, area, circumference);
    
    <span class="keyword">int</span> min, max;
    <span class="function">findMinMax</span>(<span class="number">15</span>, <span class="number">7</span>, <span class="number">23</span>, &min, &max);
    <span class="function">printf</span>(<span class="string">"最小值: %d, 最大值: %d\n"</span>, min, max);
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</div>

            <div class="tip-box">
                <strong>函數參數的最佳實踐：</strong>
                <ul>
                    <li>參數數量盡量控制在 3-5 個以內</li>
                    <li>參數順序：輸入參數在前，輸出參數在後</li>
                    <li>使用有意義的參數名稱</li>
                    <li>對於不會修改的陣列參數，可以加上 const</li>
                </ul>
            </div>
        </div>

        <div class="content">
            <h2>3. 變數作用域</h2>
            
            <h3>區域變數（Local Variable）</h3>
            <p>在函數內部宣告的變數，只能在該函數內使用，函數執行完畢後就會被銷毀。</p>

            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="keyword">void</span> <span class="function">testLocalVariable</span>() {
    <span class="keyword">int</span> local = <span class="number">10</span>;  <span class="comment">// 區域變數</span>
    <span class="function">printf</span>(<span class="string">"函數內 local = %d\n"</span>, local);
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">int</span> local = <span class="number">20</span>;  <span class="comment">// 另一個區域變數（與函數內的不同）</span>
    
    <span class="function">printf</span>(<span class="string">"main 中 local = %d\n"</span>, local);
    <span class="function">testLocalVariable</span>();
    <span class="function">printf</span>(<span class="string">"main 中 local = %d\n"</span>, local);  <span class="comment">// 不受影響</span>
    
    <span class="comment">// printf("%d", local);  // 錯誤！無法存取函數內的 local</span>
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</div>

            <h3>全域變數（Global Variable）</h3>
            <p>在所有函數外部宣告的變數，可以被程式中的任何函數使用。</p>

            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="comment">// ========== 全域變數 ==========</span>
<span class="keyword">int</span> globalVar = <span class="number">100</span>;
<span class="keyword">int</span> counter = <span class="number">0</span>;

<span class="keyword">void</span> <span class="function">increment</span>() {
    counter++;  <span class="comment">// 修改全域變數</span>
    <span class="function">printf</span>(<span class="string">"Counter in increment: %d\n"</span>, counter);
}

<span class="keyword">void</span> <span class="function">showGlobal</span>() {
    <span class="function">printf</span>(<span class="string">"Global variable: %d\n"</span>, globalVar);
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="function">printf</span>(<span class="string">"Initial counter: %d\n"</span>, counter);
    
    <span class="function">increment</span>();
    <span class="function">increment</span>();
    <span class="function">increment</span>();
    
    <span class="function">printf</span>(<span class="string">"Counter in main: %d\n"</span>, counter);
    <span class="function">showGlobal</span>();
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</div>

            <div class="warning-box">
                <strong>全域變數的缺點：</strong>
                <ul>
                    <li>降低程式碼的可讀性和可維護性</li>
                    <li>容易造成命名衝突</li>
                    <li>難以追蹤變數的修改位置</li>
                    <li>增加除錯難度</li>
                    <li><strong>建議：盡量避免使用全域變數，改用函數參數傳遞</strong></li>
                </ul>
            </div>

            <h3>靜態變數（Static Variable）</h3>
            <p>靜態區域變數會在程式執行期間一直存在，但作用域仍限於函數內部。</p>

            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="keyword">void</span> <span class="function">normalCounter</span>() {
    <span class="keyword">int</span> count = <span class="number">0</span>;  <span class="comment">// 普通區域變數</span>
    count++;
    <span class="function">printf</span>(<span class="string">"Normal count: %d\n"</span>, count);
}

<span class="keyword">void</span> <span class="function">staticCounter</span>() {
    <span class="keyword">static int</span> count = <span class="number">0</span>;  <span class="comment">// 靜態變數，只初始化一次</span>
    count++;
    <span class="function">printf</span>(<span class="string">"Static count: %d\n"</span>, count);
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="function">printf</span>(<span class="string">"=== 普通變數 ===\n"</span>);
    <span class="function">normalCounter</span>();  <span class="comment">// 輸出 1</span>
    <span class="function">normalCounter</span>();  <span class="comment">// 輸出 1</span>
    <span class="function">normalCounter</span>();  <span class="comment">// 輸出 1</span>
    
    <span class="function">printf</span>(<span class="string">"\n=== 靜態變數 ===\n"</span>);
    <span class="function">staticCounter</span>();  <span class="comment">// 輸出 1</span>
    <span class="function">staticCounter</span>();  <span class="comment">// 輸出 2</span>
    <span class="function">staticCounter</span>();  <span class="comment">// 輸出 3</span>
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</div>

            <h3>變數作用域總結</h3>
            <table>
                <tr>
                    <th>變數類型</th>
                    <th>宣告位置</th>
                    <th>作用域</th>
                    <th>生命週期</th>
                    <th>初始值</th>
                </tr>
                <tr>
                    <td>區域變數</td>
                    <td>函數內部</td>
                    <td>所在函數</td>
                    <td>函數執行期間</td>
                    <td>不確定</td>
                </tr>
                <tr>
                    <td>全域變數</td>
                    <td>所有函數外部</td>
                    <td>整個程式</td>
                    <td>程式執行期間</td>
                    <td>0</td>
                </tr>
                <tr>
                    <td>靜態區域變數</td>
                    <td>函數內部（static）</td>
                    <td>所在函數</td>
                    <td>程式執行期間</td>
                    <td>0</td>
                </tr>
                <tr>
                    <td>靜態全域變數</td>
                    <td>函數外部（static）</td>
                    <td>當前檔案</td>
                    <td>程式執行期間</td>
                    <td>0</td>
                </tr>
            </table>
        </div>
        <div class="content">
            <h2>4. 遞迴函數</h2>
            
            <h3>什麼是遞迴？</h3>
            <p>遞迴（Recursion）是指函數呼叫自己的程式設計技巧。遞迴函數必須包含：</p>
            <ul>
                <li><strong>基礎情況（Base Case）</strong>：終止遞迴的條件</li>
                <li><strong>遞迴情況（Recursive Case）</strong>：函數呼叫自己的部分</li>
            </ul>

            <h3>遞迴範例一：階乘</h3>
            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="comment">// 遞迴計算階乘</span>
<span class="comment">// n! = n × (n-1) × (n-2) × ... × 2 × 1</span>
<span class="keyword">int</span> <span class="function">factorial</span>(<span class="keyword">int</span> n) {
    <span class="comment">// 基礎情況</span>
    <span class="keyword">if</span> (n == <span class="number">0</span> || n == <span class="number">1</span>) {
        <span class="keyword">return</span> <span class="number">1</span>;
    }
    
    <span class="comment">// 遞迴情況</span>
    <span class="keyword">return</span> n * <span class="function">factorial</span>(n - <span class="number">1</span>);
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">int</span> num = <span class="number">5</span>;
    <span class="function">printf</span>(<span class="string">"%d! = %d\n"</span>, num, <span class="function">factorial</span>(num));
    
    <span class="comment">/* 遞迴過程：
       factorial(5) = 5 * factorial(4)
                    = 5 * 4 * factorial(3)
                    = 5 * 4 * 3 * factorial(2)
                    = 5 * 4 * 3 * 2 * factorial(1)
                    = 5 * 4 * 3 * 2 * 1
                    = 120
    */</span>
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</div>

            <h3>遞迴範例二：費氏數列</h3>
            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="comment">// 費氏數列：F(n) = F(n-1) + F(n-2)</span>
<span class="comment">// F(0) = 0, F(1) = 1</span>
<span class="comment">// 數列：0, 1, 1, 2, 3, 5, 8, 13, 21, ...</span>

<span class="keyword">int</span> <span class="function">fibonacci</span>(<span class="keyword">int</span> n) {
    <span class="comment">// 基礎情況</span>
    <span class="keyword">if</span> (n == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;
    <span class="keyword">if</span> (n == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;
    
    <span class="comment">// 遞迴情況</span>
    <span class="keyword">return</span> <span class="function">fibonacci</span>(n - <span class="number">1</span>) + <span class="function">fibonacci</span>(n - <span class="number">2</span>);
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="function">printf</span>(<span class="string">"費氏數列前 10 項：\n"</span>);
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < <span class="number">10</span>; i++) {
        <span class="function">printf</span>(<span class="string">"F(%d) = %d\n"</span>, i, <span class="function">fibonacci</span>(i));
    }
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</div>

            <div class="warning-box">
                <strong>注意：</strong>
                <p>費氏數列的遞迴實作雖然簡潔，但效能很差！因為會重複計算相同的值。例如計算 fibonacci(5) 時，fibonacci(3) 會被計算 2 次，fibonacci(2) 會被計算 3 次。對於大的 n 值，計算時間會呈指數增長。</p>
            </div>

            <h3>遞迴範例三：最大公因數（GCD）</h3>
            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="comment">// 使用輾轉相除法計算最大公因數</span>
<span class="comment">// GCD(a, b) = GCD(b, a % b)</span>
<span class="keyword">int</span> <span class="function">gcd</span>(<span class="keyword">int</span> a, <span class="keyword">int</span> b) {
    <span class="comment">// 基礎情況</span>
    <span class="keyword">if</span> (b == <span class="number">0</span>) {
        <span class="keyword">return</span> a;
    }
    
    <span class="comment">// 遞迴情況</span>
    <span class="keyword">return</span> <span class="function">gcd</span>(b, a % b);
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">int</span> num1 = <span class="number">48</span>, num2 = <span class="number">18</span>;
    
    <span class="function">printf</span>(<span class="string">"GCD(%d, %d) = %d\n"</span>, num1, num2, <span class="function">gcd</span>(num1, num2));
    
    <span class="comment">/* 計算過程：
       gcd(48, 18) = gcd(18, 48%18) = gcd(18, 12)
                   = gcd(12, 18%12) = gcd(12, 6)
                   = gcd(6, 12%6)   = gcd(6, 0)
                   = 6
    */</span>
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</div>

            <h3>遞迴範例四：次方計算</h3>
            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="comment">// 計算 base^exponent</span>
<span class="keyword">double</span> <span class="function">power</span>(<span class="keyword">double</span> base, <span class="keyword">int</span> exponent) {
    <span class="comment">// 基礎情況</span>
    <span class="keyword">if</span> (exponent == <span class="number">0</span>) {
        <span class="keyword">return</span> <span class="number">1</span>;
    }
    
    <span class="comment">// 處理負指數</span>
    <span class="keyword">if</span> (exponent < <span class="number">0</span>) {
        <span class="keyword">return</span> <span class="number">1</span> / <span class="function">power</span>(base, -exponent);
    }
    
    <span class="comment">// 遞迴情況</span>
    <span class="keyword">return</span> base * <span class="function">power</span>(base, exponent - <span class="number">1</span>);
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="function">printf</span>(<span class="string">"2^5 = %.0f\n"</span>, <span class="function">power</span>(<span class="number">2</span>, <span class="number">5</span>));
    <span class="function">printf</span>(<span class="string">"3^4 = %.0f\n"</span>, <span class="function">power</span>(<span class="number">3</span>, <span class="number">4</span>));
    <span class="function">printf</span>(<span class="string">"2^-3 = %.3f\n"</span>, <span class="function">power</span>(<span class="number">2</span>, <span class="number">-3</span>));
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</div>

            <h3>遞迴範例五：數字總和</h3>
            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="comment">// 計算 1 到 n 的總和</span>
<span class="keyword">int</span> <span class="function">sum</span>(<span class="keyword">int</span> n) {
    <span class="keyword">if</span> (n == <span class="number">1</span>) {
        <span class="keyword">return</span> <span class="number">1</span>;
    }
    <span class="keyword">return</span> n + <span class="function">sum</span>(n - <span class="number">1</span>);
}

<span class="comment">// 計算數字各位數的總和</span>
<span class="keyword">int</span> <span class="function">digitSum</span>(<span class="keyword">int</span> n) {
    <span class="keyword">if</span> (n == <span class="number">0</span>) {
        <span class="keyword">return</span> <span class="number">0</span>;
    }
    <span class="keyword">return</span> (n % <span class="number">10</span>) + <span class="function">digitSum</span>(n / <span class="number">10</span>);
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="function">printf</span>(<span class="string">"1 到 100 的總和: %d\n"</span>, <span class="function">sum</span>(<span class="number">100</span>));
    <span class="function">printf</span>(<span class="string">"12345 各位數總和: %d\n"</span>, <span class="function">digitSum</span>(<span class="number">12345</span>));
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</div>

            <h3>遞迴 vs 迴圈</h3>
            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="comment">// ========== 遞迴版本 ==========</span>
<span class="keyword">int</span> <span class="function">factorialRecursive</span>(<span class="keyword">int</span> n) {
    <span class="keyword">if</span> (n <= <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;
    <span class="keyword">return</span> n * <span class="function">factorialRecursive</span>(n - <span class="number">1</span>);
}

<span class="comment">// ========== 迴圈版本 ==========</span>
<span class="keyword">int</span> <span class="function">factorialIterative</span>(<span class="keyword">int</span> n) {
    <span class="keyword">int</span> result = <span class="number">1</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i <= n; i++) {
        result *= i;
    }
    <span class="keyword">return</span> result;
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">int</span> n = <span class="number">10</span>;
    
    <span class="function">printf</span>(<span class="string">"遞迴版本: %d! = %d\n"</span>, n, <span class="function">factorialRecursive</span>(n));
    <span class="function">printf</span>(<span class="string">"迴圈版本: %d! = %d\n"</span>, n, <span class="function">factorialIterative</span>(n));
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</div>

            <h3>遞迴的優缺點</h3>
            <table>
                <tr>
                    <th>比較項目</th>
                    <th>遞迴</th>
                    <th>迴圈</th>
                </tr>
                <tr>
                    <td>程式碼簡潔度</td>
                    <td>✅ 通常較簡潔優雅</td>
                    <td>❌ 可能較冗長</td>
                </tr>
                <tr>
                    <td>可讀性</td>
                    <td>✅ 符合數學定義</td>
                    <td>✅ 執行流程清楚</td>
                </tr>
                <tr>
                    <td>記憶體使用</td>
                    <td>❌ 需要堆疊空間</td>
                    <td>✅ 記憶體使用較少</td>
                </tr>
                <tr>
                    <td>執行速度</td>
                    <td>❌ 通常較慢</td>
                    <td>✅ 通常較快</td>
                </tr>
                <tr>
                    <td>堆疊溢位風險</td>
                    <td>❌ 深度過大會溢位</td>
                    <td>✅ 無此風險</td>
                </tr>
                <tr>
                    <td>適用場景</td>
                    <td>樹、圖等結構</td>
                    <td>簡單重複操作</td>
                </tr>
            </table>

            <div class="tip-box">
                <strong>何時使用遞迴？</strong>
                <ul>
                    <li>問題本質上具有遞迴性質（如樹的遍歷）</li>
                    <li>程式碼簡潔性比效能更重要</li>
                    <li>遞迴深度不會太大</li>
                    <li>數學問題的直接轉換</li>
                </ul>
                <strong>何時避免遞迴？</strong>
                <ul>
                    <li>效能是關鍵考量</li>
                    <li>遞迴深度可能很大</li>
                    <li>存在大量重複計算（如費氏數列）</li>
                    <li>簡單的重複操作</li>
                </ul>
            </div>
        </div>

        <div class="content">
            <h2>5. 函數設計原則</h2>
            
            <h3>單一職責原則（Single Responsibility Principle）</h3>
            <p>一個函數應該只做一件事，並把它做好。</p>

            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="comment">// ❌ 不好的設計：函數做太多事</span>
<span class="keyword">void</span> <span class="function">processDataBad</span>(<span class="keyword">int</span> arr[], <span class="keyword">int</span> size) {
    <span class="comment">// 計算平均</span>
    <span class="keyword">int</span> sum = <span class="number">0</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < size; i++) sum += arr[i];
    <span class="keyword">double</span> avg = sum / (<span class="keyword">double</span>)size;
    
    <span class="comment">// 找最大值</span>
    <span class="keyword">int</span> max = arr[<span class="number">0</span>];
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i < size; i++) {
        <span class="keyword">if</span> (arr[i] > max) max = arr[i];
    }
    
    <span class="comment">// 排序</span>
    <span class="comment">// ... 排序程式碼</span>
    
    <span class="comment">// 輸出結果</span>
    <span class="function">printf</span>(<span class="string">"平均: %.2f, 最大: %d\n"</span>, avg, max);
}

<span class="comment">// ✅ 好的設計：每個函數專注一件事</span>
<span class="keyword">double</span> <span class="function">calculateAverage</span>(<span class="keyword">int</span> arr[], <span class="keyword">int</span> size) {
    <span class="keyword">int</span> sum = <span class="number">0</span>;
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < size; i++) {
        sum += arr[i];
    }
    <span class="keyword">return</span> sum / (<span class="keyword">double</span>)size;
}

<span class="keyword">int</span> <span class="function">findMax</span>(<span class="keyword">int</span> arr[], <span class="keyword">int</span> size) {
    <span class="keyword">int</span> max = arr[<span class="number">0</span>];
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i < size; i++) {
        <span class="keyword">if</span> (arr[i] > max) max = arr[i];
    }
    <span class="keyword">return</span> max;
}

<span class="keyword">void</span> <span class="function">sortArray</span>(<span class="keyword">int</span> arr[], <span class="keyword">int</span> size) {
    <span class="comment">// 排序實作</span>
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">int</span> data[] = {<span class="number">5</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">9</span>};
    <span class="keyword">int</span> size = <span class="number">5</span>;
    
    <span class="keyword">double</span> avg = <span class="function">calculateAverage</span>(data, size);
    <span class="keyword">int</span> max = <span class="function">findMax</span>(data, size);
    
    <span class="function">printf</span>(<span class="string">"平均: %.2f, 最大: %d\n"</span>, avg, max);
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</div>

            <h3>函數命名規範</h3>
            <div class="code-block"><span class="comment">// ✅ 好的函數命名</span>
<span class="keyword">int</span> <span class="function">calculateSum</span>(<span class="keyword">int</span> arr[], <span class="keyword">int</span> size);
<span class="keyword">void</span> <span class="function">printResult</span>(<span class="keyword">int</span> value);
<span class="keyword">int</span> <span class="function">isValidInput</span>(<span class="keyword">int</span> num);
<span class="keyword">double</span> <span class="function">getAverageScore</span>(<span class="keyword">int</span> scores[], <span class="keyword">int</span> count);

<span class="comment">// ❌ 不好的函數命名</span>
<span class="keyword">int</span> <span class="function">func1</span>(<span class="keyword">int</span> a[], <span class="keyword">int</span> b);  <span class="comment">// 名稱無意義</span>
<span class="keyword">void</span> <span class="function">p</span>(<span class="keyword">int</span> x);  <span class="comment">// 太簡短</span>
<span class="keyword">int</span> <span class="function">calculate_sum_of_all_array_elements</span>(<span class="keyword">int</span> a[], <span class="keyword">int</span> s);  <span class="comment">// 太冗長</span></div>

            <h3>函數長度控制</h3>
            <div class="note-box">
                <strong>建議：</strong>
                <ul>
                    <li>一個函數最好不超過 20-30 行</li>
                    <li>如果函數太長，考慮拆分成多個小函數</li>
                    <li>函數應該在一個螢幕內可以看完</li>
                    <li>複雜的函數應該加上註解說明</li>
                </ul>
            </div>

            <h3>錯誤處理</h3>
            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="comment">// ❌ 沒有錯誤處理</span>
<span class="keyword">double</span> <span class="function">divideBad</span>(<span class="keyword">double</span> a, <span class="keyword">double</span> b) {
    <span class="keyword">return</span> a / b;  <span class="comment">// 如果 b=0 會出錯</span>
}

<span class="comment">// ✅ 有錯誤處理（方法一：返回特殊值）</span>
<span class="keyword">double</span> <span class="function">divideGood1</span>(<span class="keyword">double</span> a, <span class="keyword">double</span> b) {
    <span class="keyword">if</span> (b == <span class="number">0</span>) {
        <span class="function">printf</span>(<span class="string">"錯誤：除數不可為 0\n"</span>);
        <span class="keyword">return</span> <span class="number">0</span>;  <span class="comment">// 或返回 -1、NAN 等特殊值</span>
    }
    <span class="keyword">return</span> a / b;
}

<span class="comment">// ✅ 有錯誤處理（方法二：使用參數指標返回狀態）</span>
<span class="keyword">double</span> <span class="function">divideGood2</span>(<span class="keyword">double</span> a, <span class="keyword">double</span> b, <span class="keyword">int</span> *error) {
    <span class="keyword">if</span> (b == <span class="number">0</span>) {
        *error = <span class="number">1</span>;  <span class="comment">// 設定錯誤旗標</span>
        <span class="keyword">return</span> <span class="number">0</span>;
    }
    *error = <span class="number">0</span>;  <span class="comment">// 無錯誤</span>
    <span class="keyword">return</span> a / b;
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">int</span> error;
    <span class="keyword">double</span> result = <span class="function">divideGood2</span>(<span class="number">10.0</span>, <span class="number">0</span>, &error);
    
    <span class="keyword">if</span> (error) {
        <span class="function">printf</span>(<span class="string">"除法運算失敗\n"</span>);
    } <span class="keyword">else</span> {
        <span class="function">printf</span>(<span class="string">"結果: %.2f\n"</span>, result);
    }
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</div>

            <h3>函數設計檢查清單</h3>
            <div class="tip-box">
                <strong>✓ 好的函數應該：</strong>
                <ul>
                    <li>有清楚、描述性的名稱</li>
                    <li>只做一件事情（單一職責）</li>
                    <li>參數數量適中（建議不超過 5 個）</li>
                    <li>有適當的錯誤處理</li>
                    <li>函數長度適中（不超過 30 行）</li>
                    <li>避免使用全域變數</li>
                    <li>有清楚的輸入輸出</li>
                    <li>容易測試和除錯</li>
                    <li>有必要的註解說明</li>
                </ul>
            </div>
        </div>

        <div class="content">
            <h2>6. 綜合範例</h2>
            
            <h3>範例一：計算機程式</h3>
            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="comment">// 加法</span>
<span class="keyword">double</span> <span class="function">add</span>(<span class="keyword">double</span> a, <span class="keyword">double</span> b) {
    <span class="keyword">return</span> a + b;
}

<span class="comment">// 減法</span>
<span class="keyword">double</span> <span class="function">subtract</span>(<span class="keyword">double</span> a, <span class="keyword">double</span> b) {
    <span class="keyword">return</span> a - b;
}

<span class="comment">// 乘法</span>
<span class="keyword">double</span> <span class="function">multiply</span>(<span class="keyword">double</span> a, <span class="keyword">double</span> b) {
    <span class="keyword">return</span> a * b;
}

<span class="comment">// 除法</span>
<span class="keyword">double</span> <span class="function">divide</span>(<span class="keyword">double</span> a, <span class="keyword">double</span> b) {
    <span class="keyword">if</span> (b == <span class="number">0</span>) {
        <span class="function">printf</span>(<span class="string">"錯誤：除數不可為 0\n"</span>);
        <span class="keyword">return</span> <span class="number">0</span>;
    }
    <span class="keyword">return</span> a / b;
}

<span class="comment">// 顯示選單</span>
<span class="keyword">void</span> <span class="function">showMenu</span>() {
    <span class="function">printf</span>(<span class="string">"\n=== 簡易計算機 ===\n"</span>);
    <span class="function">printf</span>(<span class="string">"1. 加法\n"</span>);
    <span class="function">printf</span>(<span class="string">"2. 減法\n"</span>);
    <span class="function">printf</span>(<span class="string">"3. 乘法\n"</span>);
    <span class="function">printf</span>(<span class="string">"4. 除法\n"</span>);
    <span class="function">printf</span>(<span class="string">"0. 結束\n"</span>);
    <span class="function">printf</span>(<span class="string">"請選擇: "</span>);
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">int</span> choice;
    <span class="keyword">double</span> num1, num2, result;
    
    <span class="keyword">while</span> (<span class="number">1</span>) {
        <span class="function">showMenu</span>();
        <span class="function">scanf</span>(<span class="string">"%d"</span>, &choice);
        
        <span class="keyword">if</span> (choice == <span class="number">0</span>) {
            <span class="function">printf</span>(<span class="string">"程式結束\n"</span>);
            <span class="keyword">break</span>;
        }
        
        <span class="function">printf</span>(<span class="string">"請輸入兩個數字: "</span>);
        <span class="function">scanf</span>(<span class="string">"%lf %lf"</span>, &num1, &num2);
        
        <span class="keyword">switch</span> (choice) {
            <span class="keyword">case</span> <span class="number">1</span>:
                result = <span class="function">add</span>(num1, num2);
                <span class="function">printf</span>(<span class="string">"%.2f + %.2f = %.2f\n"</span>, num1, num2, result);
                <span class="keyword">break</span>;
            <span class="keyword">case</span> <span class="number">2</span>:
                result = <span class="function">subtract</span>(num1, num2);
                <span class="function">printf</span>(<span class="string">"%.2f - %.2f = %.2f\n"</span>, num1, num2, result);
                <span class="keyword">break</span>;
            <span class="keyword">case</span> <span class="number">3</span>:
                result = <span class="function">multiply</span>(num1, num2);
                <span class="function">printf</span>(<span class="string">"%.2f × %.2f = %.2f\n"</span>, num1, num2, result);
                <span class="keyword">break</span>;
            <span class="keyword">case</span> <span class="number">4</span>:
                result = <span class="function">divide</span>(num1, num2);
                <span class="function">printf</span>(<span class="string">"%.2f ÷ %.2f = %.2f\n"</span>, num1, num2, result);
                <span class="keyword">break</span>;
            <span class="keyword">default</span>:
                <span class="function">printf</span>(<span class="string">"無效的選擇\n"</span>);
        }
    }
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</div>

            <h3>範例二：陣列工具函數庫</h3>
            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="comment">// 列印陣列</span>
<span class="keyword">void</span> <span class="function">printArray</span>(<span class="keyword">int</span> arr[], <span class="keyword">int</span> size) {
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < size; i++) {
        <span class="function">printf</span>(<span class="string">"%d "</span>, arr[i]);
    }
    <span class="function">printf</span>(<span class="string">"\n"</span>);
}

<span class="comment">// 反轉陣列</span>
<span class="keyword">void</span> <span class="function">reverseArray</span>(<span class="keyword">int</span> arr[], <span class="keyword">int</span> size) {
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < size / <span class="number">2</span>; i++) {
        <span class="keyword">int</span> temp = arr[i];
        arr[i] = arr[size - <span class="number">1</span> - i];
        arr[size - <span class="number">1</span> - i] = temp;
    }
}

<span class="comment">// 搜尋元素</span>
<span class="keyword">int</span> <span class="function">searchElement</span>(<span class="keyword">int</span> arr[], <span class="keyword">int</span> size, <span class="keyword">int</span> target) {
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < size; i++) {
        <span class="keyword">if</span> (arr[i] == target) {
            <span class="keyword">return</span> i;  <span class="comment">// 返回索引</span>
        }
    }
    <span class="keyword">return</span> <span class="number">-1</span>;  <span class="comment">// 未找到</span>
}

<span class="comment">// 複製陣列</span>
<span class="keyword">void</span> <span class="function">copyArray</span>(<span class="keyword">int</span> source[], <span class="keyword">int</span> dest[], <span class="keyword">int</span> size) {
    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < size; i++) {
        dest[i] = source[i];
    }
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">int</span> arr[] = {<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>};
    <span class="keyword">int</span> size = <span class="number">5</span>;
    <span class="keyword">int</span> copy[<span class="number">5</span>];
    
    <span class="function">printf</span>(<span class="string">"原始陣列: "</span>);
    <span class="function">printArray</span>(arr, size);
    
    <span class="function">reverseArray</span>(arr, size);
    <span class="function">printf</span>(<span class="string">"反轉後: "</span>);
    <span class="function">printArray</span>(arr, size);
    
    <span class="keyword">int</span> index = <span class="function">searchElement</span>(arr, size, <span class="number">3</span>);
    <span class="keyword">if</span> (index != <span class="number">-1</span>) {
        <span class="function">printf</span>(<span class="string">"找到 3，索引: %d\n"</span>, index);
    }
    
    <span class="function">copyArray</span>(arr, copy, size);
    <span class="function">printf</span>(<span class="string">"複製陣列: "</span>);
    <span class="function">printArray</span>(copy, size);
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</div>

            <h3>範例三：河內塔問題（遞迴經典）</h3>
            <div class="code-block"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span>

<span class="comment">/* 河內塔問題：
   將 n 個盤子從 A 柱移到 C 柱，可借助 B 柱
   規則：每次只能移動一個盤子，且大盤不能放在小盤上
*/</span>

<span class="keyword">void</span> <span class="function">hanoi</span>(<span class="keyword">int</span> n, <span class="keyword">char</span> from, <span class="keyword">char</span> to, <span class="keyword">char</span> aux) {
    <span class="keyword">if</span> (n == <span class="number">1</span>) {
        <span class="function">printf</span>(<span class="string">"移動盤子 1 從 %c 到 %c\n"</span>, from, to);
        <span class="keyword">return</span>;
    }
    
    <span class="comment">// 步驟 1：將 n-1 個盤子從 from 移到 aux（借助 to）</span>
    <span class="function">hanoi</span>(n - <span class="number">1</span>, from, aux, to);
    
    <span class="comment">// 步驟 2：將第 n 個盤子從 from 移到 to</span>
    <span class="function">printf</span>(<span class="string">"移動盤子 %d 從 %c 到 %c\n"</span>, n, from, to);
    
    <span class="comment">// 步驟 3：將 n-1 個盤子從 aux 移到 to（借助 from）</span>
    <span class="function">hanoi</span>(n - <span class="number">1</span>, aux, to, from);
}

<span class="keyword">int</span> <span class="function">main</span>() {
    <span class="keyword">int</span> n = <span class="number">3</span>;
    <span class="function">printf</span>(<span class="string">"河內塔問題（%d 個盤子）：\n"</span>, n);
    <span class="function">hanoi</span>(n, <span class="string">'A'</span>, <span class="string">'C'</span>, <span class="string">'B'</span>);
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</div>
        </div>

        <div class="content">
            <div class="exercise-section">
                <h3>本週練習題</h3>
                
                <h4>基礎練習</h4>
                <ol>
                    <li>
                        <strong>溫度轉換函數</strong><br>
                        撰寫函數將攝氏溫度轉換為華氏溫度，以及華氏轉攝氏。<br>
                        公式：F = C × 9/5 + 32
                    </li>
                    <li>
                        <strong>判斷閏年</strong><br>
                        撰寫函數判斷輸入的年份是否為閏年。<br>
                        閏年條件：能被 4 整除但不能被 100 整除，或能被 400 整除
                    </li>
                    <li>
                        <strong>陣列平均值</strong><br>
                        撰寫函數計算整數陣列的平均值（返回 double 型態）。
                    </li>
                    <li>
                        <strong>字元計數</strong><br>
                        撰寫函數計算字串中某個字元出現的次數。
                    </li>
                </ol>

                <h4>進階練習</h4>
                <ol start="5">
                    <li>
                        <strong>質數判斷</strong><br>
                        撰寫函數判斷一個數是否為質數，並寫另一個函數列出 1-100 的所有質數。
                    </li>
                    <li>
                        <strong>陣列排序</strong><br>
                        撰寫函數實作選擇排序或插入排序演算法。
                    </li>
                    <li>
                        <strong>遞迴：二進位轉換</strong><br>
                        使用遞迴函數將十進位數字轉換為二進位輸出。
                    </li>
                    <li>
                        <strong>字串反轉</strong><br>
                        撰寫遞迴和非遞迴兩個版本的字串反轉函數。
                    </li>
                </ol>

                <h4>挑戰練習</h4>
                <ol start="9">
                    <li>
                        <strong>帕斯卡三角形</strong><br>
                        使用遞迴函數產生帕斯卡三角形的第 n 列。<br>
                        提示：C(n,k) = C(n-1,k-1) + C(n-1,k)
                    </li>
                    <li>
                        <strong>漢諾塔計數</strong><br>
                        修改河內塔程式，計算並返回需要移動的次數（而非印出步驟）。
                    </li>
                    <li>
                        <strong>成績系統</strong><br>
                        建立一個成績管理系統，包含以下函數：<br>
                        - 輸入成績<br>
                        - 計算平均分<br>
                        - 找出最高分和最低分<br>
                        - 統計及格人數<br>
                        - 排序並顯示成績
                    </li>
                </ol>

                <div class="tip-box">
                    <strong>練習提示：</strong>
                    <ul>
                        <li>先寫函數原型，再實作函數主體</li>
                        <li>為每個函數加上註解說明其功能</li>
                        <li>測試函數時使用多種測試案例</li>
                        <li>注意邊界條件的處理</li>
                        <li>遞迴函數要確保有正確的基礎情況</li>
                        <li>比較遞迴和迴圈版本的效能差異</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="content">
            <h2>本週總結</h2>
            
            <h3>重點回顧</h3>
            <ul>
                <li>✓ 理解函數的定義、宣告和呼叫方式</li>
                <li>✓ 掌握函數參數傳遞機制（傳值呼叫）</li>
                <li>✓ 了解變數作用域（區域、全域、靜態）</li>
                <li>✓ 學會撰寫遞迴函數並了解其優缺點</li>
                <li>✓ 熟悉函數設計的最佳實踐</li>
                <li>✓ 能夠將複雜問題分解為多個函數</li>
            </ul>

            <h3>常見錯誤整理</h3>
            <div class="warning-box">
                <strong>需要特別注意：</strong>
                <ul>
                    <li><strong>忘記返回值</strong>：函數宣告有返回值但沒有 return 語句</li>
                    <li><strong>參數型態不符</strong>：呼叫函數時參數型態與定義不一致</li>
                    <li><strong>陣列大小問題</strong>：在函數內無法用 sizeof 得到陣列真實大小</li>
                    <li><strong>遞迴沒有終止條件</strong>：導致堆疊溢位</li>
                    <li><strong>全域變數濫用</strong>：降低程式碼可維護性</li>
                    <li><strong>函數過於複雜</strong>：一個函數做太多事情</li>
                </ul>
            </div>

            <h3>下週預告</h3>
            <div class="note-box">
                <h4>Week 5 - 結構與聯合</h4>
                <p>下週將學習：</p>
                <ul>
                    <li>結構（struct）的定義與使用</li>
                    <li>結構陣列與巢狀結構</li>
                    <li>結構作為函數參數</li>
                    <li>聯合（union）的概念</li>
                    <li>typedef 的使用</li>
                    <li>實用範例：學生資料管理、座標計算</li>
                </ul>
            </div>
        </div>

        <div class="nav-buttons">
            <a href="week3.html" class="btn btn-secondary">← Week 3</a>
            <a href="week5.html" class="btn">Week 5 →</a>
        </div>

        <footer style="text-align: center; padding: 30px 0; color: #7f8c8d; margin-top: 50px; border-top: 1px solid #ddd;">
            <p style="margin: 10px 0;">C語言程式設計 Week 4 完整教材</p>
            <p style="margin: 10px 0; font-size: 0.9em;">函數設計 · 參數傳遞 · 變數作用域 · 遞迴應用</p>
            <p style="margin: 10px 0; font-size: 0.85em; color: #95a5a6;">© 2025 All Rights Reserved</p>
        </footer>
    </div>
</body>
</html>